@model Valora.ViewModels.AddRoleViewModel
@inject Microsoft.AspNetCore.Identity.RoleManager<Valora.Models.ApplicationRole> RoleManager
@{
    ViewData["Title"] = "Add Role";
}

<style>
    .roles-wrapper { padding:3rem 0; }
    .role-form-card { background:#fff; border:1px solid #dedede; padding:1.75rem 1.5rem; }
    .role-form-card h2 { font-size:1rem; text-transform:uppercase; letter-spacing:.18em; font-weight:600; }
    .role-form-card label { font-size:.65rem; text-transform:uppercase; letter-spacing:.12em; font-weight:600; color:#555; }
    .role-form-card .form-control { border-radius:0; font-size:.85rem; }
    .role-form-card .form-control:focus { box-shadow:none; border-color:#111; }
    .btn-action { text-transform:uppercase; letter-spacing:.12em; font-size:.65rem; font-weight:600; border-radius:0; }
    .role-tile { border:1px solid #d1d1d1; background:#fff; transition:background .25s ease, color .25s ease; }
    .role-tile:hover { background:#111; color:#fff; }
    .role-tile strong { font-size:.6rem; letter-spacing:.1em; }
    .role-tile span { font-size:.55rem; }
</style>

<div class="container roles-wrapper">
  <div class="row g-4">
    <div class="col-lg-4">
      <div class="role-form-card shadow-sm h-100">
        <h2>Add Role</h2>
        <form asp-action="AddRole" method="post" class="mt-3">
            <div class="mb-3">
                <label asp-for="RoleName" class="form-label"></label>
                <input asp-for="RoleName" class="form-control" />
                <span asp-validation-for="RoleName" class="text-danger small"></span>
            </div>
            <div class="d-flex gap-2">
                <button type="submit" class="btn btn-dark btn-action">Add Role</button>
            </div>
        </form>
        @if(TempData["SuccessMessage"]!=null){
            <div class="alert alert-success alert-dismissible fade show mt-3 small" role="alert">
                @TempData["SuccessMessage"]
                <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
            </div>
        }
      </div>
    </div>
    <div class="col-lg-8">
      <h4 class="text-uppercase mb-3" style="letter-spacing:.12em; font-size:.75rem;">Existing Roles</h4>
      <div class="row g-3">
        @foreach (var r in RoleManager.Roles.OrderBy(r=>r.Name))
        {
            <div class="col-6 col-md-4">
                <div class="role-tile p-3 h-100 d-flex flex-column">
                    <strong class="text-uppercase">@r.Name</strong>
                    <span class="text-muted mt-auto">@r.Id</span>
                </div>
            </div>
        }
        @if(!RoleManager.Roles.Any()){
            <div class="col-12"><p class="text-muted small mb-0">No roles defined yet.</p></div>
        }
      </div>
    </div>
  </div>
</div>

@section Scripts {
    @{await Html.RenderPartialAsync("_ValidationScriptsPartial");}
}
